#[include shell_command.cfg]
[include mainsail.cfg]
[include include/steppers.cfg]
[include include/fans.cfg]
[include include/bed.cfg]
#[include include/sensorless.cfg]f
#[include include/quickdraw.cfg]
[include include/led.cfg]
[include include/macros.cfg]
#[include include/trad_rack_btt_mmb.cfg]
#[include include/trad_rack_optional.cfg]

[safe_z_home]
home_xy_position: 165, 165
z_hop: 10

[z_tilt] 
z_positions: #Nozzle to GE5C
  -80,  -20
  350, -20
points:
  15, 150
  275, 150
speed: 50
horizontal_move_z: 10
retries: 30
retry_tolerance: 0.1

[input_shaper]
shaper_type_x = zv
shaper_freq_x = 120.6
shaper_type_y = zv
shaper_freq_y = 76.6

[cartographer]
serial: /dev/serial/by-id/usb-Cartographer_614e_01002B001043303856303820-if00
is_non_critical: True
reconnect_interval: 9999999
#   Path to the serial port for the Cartographer device. Typically has the form
#   /dev/serial/by-id/usb-cartographer_cartographer_...
#   
#   If you are using the CAN Bus version, replace serial: with canbus_uuid: and add the UUID.
#   Example: canbus_uuid: 1283as878a9sd
#
speed: 40.
#   Z probing dive speed.
lift_speed: 5.
#   Z probing lift speed.
backlash_comp: 0.5
#   Backlash compensation distance for removing Z backlash before measuring
#   the sensor response.
x_offset: 0.
#   X offset of cartographer from the nozzle.
y_offset: 21.1
#   Y offset of cartographer from the nozzle.
trigger_distance: 2.
#   cartographer trigger distance for homing.
trigger_dive_threshold: 1.5
#   Threshold for range vs dive mode probing. Beyond `trigger_distance +
#   trigger_dive_threshold` a dive will be used.
trigger_hysteresis: 0.006
#   Hysteresis on trigger threshold for untriggering, as a percentage of the
#   trigger threshold.
cal_nozzle_z: 0.1
#   Expected nozzle offset after completing manual Z offset calibration.
cal_floor: 0.1
#   Minimum z bound on sensor response measurement.
cal_ceil:5.
#   Maximum z bound on sensor response measurement.
cal_speed: 1.0
#   Speed while measuring response curve.
cal_move_speed: 10.
#   Speed while moving to position for response curve measurement.
default_model_name: default
#   Name of default cartographer model to load.
mesh_main_direction: X
#   Primary travel direction during mesh measurement.
#mesh_overscan: -1
#   Distance to use for direction changes at mesh line ends. Omit this setting
#   and a default will be calculated from line spacing and available travel.
mesh_cluster_size: 1
#   Radius of mesh grid point clusters.
mesh_runs: 2
#   Number of passes to make during mesh scan.

[printer]
kinematics: corexy
max_velocity: 3000
max_accel: 20000
#max_accel_to_decel: 5000
max_z_velocity: 20
max_z_accel: 15
square_corner_velocity: 10

[exclude_object]

[gcode_arcs] # OrcaSlicer
resolution: 0.8


[idle_timeout]
# only turn off heaters and motors if the printer is not paused
gcode:
    {% if not printer.pause_resume.is_paused %}
        TURN_OFF_HEATERS
        M84
    {% endif %}

[pause_resume]
recover_velocity: 350

[save_variables]
filename:vars.cfg

[virtual_sdcard]
path: /home/pi/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

[mcu]
#USB
serial: /dev/serial/by-id/usb-Klipper_stm32h723xx_0F003B001751313338343730-if00
reconnect_interval: 9999




# Driver6
[extruder]
nozzle_diameter: 0.500
pressure_advance: 0.025
pressure_advance_smooth_time: 0.03
max_extrude_only_distance: 101

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	-0.584342, -0.040295, -0.032340, -0.021922, -0.027827, -0.026348, -0.022137, -0.012774, -0.002201, 0.002420, 0.022132, 0.030481, 0.036869, 0.040548, 0.041094, 0.051705, 0.030744, 0.043306, 0.044589, 0.048177, 0.062736, 0.049246, 0.082227, 0.085423, 0.100241
#*# 	-0.582341, -0.046298, -0.033848, -0.035640, -0.033778, -0.030713, -0.026357, -0.017363, -0.005248, 0.005275, 0.016303, 0.026988, 0.036329, 0.038058, 0.040037, 0.039379, 0.039018, 0.039978, 0.043816, 0.046551, 0.049416, 0.056593, 0.071042, 0.085636, 0.096772
#*# 	-0.592129, -0.048780, -0.040162, -0.043194, -0.037347, -0.032191, -0.024750, -0.013368, -0.004521, 0.013850, 0.016225, 0.034357, 0.039401, 0.045020, 0.045970, 0.045532, 0.039340, 0.052372, 0.041193, 0.057362, 0.052132, 0.060625, 0.076863, 0.092041, 0.087731
#*# 	-0.571228, -0.049444, -0.038953, -0.039586, -0.036754, -0.030431, -0.021839, -0.009688, 0.001203, 0.013083, 0.024376, 0.033930, 0.045080, 0.048864, 0.049612, 0.048756, 0.049042, 0.049811, 0.051190, 0.052346, 0.054900, 0.062634, 0.077684, 0.092314, 0.099876
#*# 	-0.562285, -0.051632, -0.041043, -0.036520, -0.039117, -0.034312, -0.018843, -0.008458, 0.000354, 0.017040, 0.026501, 0.036669, 0.052219, 0.055495, 0.048051, 0.051081, 0.055798, 0.043885, 0.047407, 0.054518, 0.052940, 0.059293, 0.071212, 0.081272, 0.089999
#*# 	-0.542022, -0.055142, -0.046421, -0.047652, -0.045236, -0.038099, -0.027244, -0.013939, -0.003164, 0.008234, 0.019593, 0.034170, 0.048562, 0.049492, 0.045614, 0.043027, 0.041560, 0.041882, 0.039140, 0.039533, 0.043739, 0.049403, 0.057133, 0.066951, 0.079765
#*# 	-0.544239, -0.059687, -0.051490, -0.051765, -0.048586, -0.043154, -0.032894, -0.021140, -0.008714, 0.004457, 0.013664, 0.026286, 0.040020, 0.042495, 0.038640, 0.036423, 0.036985, 0.032947, 0.029921, 0.028672, 0.031890, 0.032941, 0.044903, 0.053184, 0.066269
#*# 	-0.526101, -0.054947, -0.046711, -0.046571, -0.045748, -0.039716, -0.033018, -0.021626, -0.010385, 0.001816, 0.010329, 0.019433, 0.029131, 0.033046, 0.031346, 0.030906, 0.031333, 0.030354, 0.028013, 0.027194, 0.029559, 0.035798, 0.039982, 0.051042, 0.063922
#*# 	-0.502162, -0.045085, -0.036331, -0.033506, -0.032912, -0.031346, -0.026309, -0.017804, -0.005855, 0.001692, 0.011841, 0.022196, 0.026503, 0.034186, 0.036502, 0.035613, 0.033418, 0.035006, 0.031546, 0.026811, 0.035071, 0.039030, 0.042390, 0.053694, 0.070758
#*# 	-0.484481, -0.034104, -0.026170, -0.025309, -0.025954, -0.025367, -0.021544, -0.012660, -0.000984, 0.005958, 0.015216, 0.022824, 0.028813, 0.035107, 0.038298, 0.038103, 0.034913, 0.033591, 0.033819, 0.032520, 0.033443, 0.039400, 0.045194, 0.055774, 0.075173
#*# 	-0.452402, -0.022642, -0.012335, -0.009992, -0.019093, -0.018720, -0.012107, -0.012550, 0.000311, 0.009090, 0.016050, 0.024552, 0.026362, 0.036047, 0.042189, 0.038998, 0.037263, 0.034362, 0.026461, 0.028621, 0.029497, 0.023716, 0.037208, 0.050817, 0.059341
#*# 	-0.419450, -0.015316, -0.011167, -0.010847, -0.014598, -0.021960, -0.014569, -0.006123, -0.001283, 0.009128, 0.014934, 0.018405, 0.026631, 0.032895, 0.039385, 0.039409, 0.032662, 0.024520, 0.020412, 0.019192, 0.016337, 0.017704, 0.023422, 0.036155, 0.046065
#*# 	-0.405604, -0.008415, -0.001260, -0.012426, -0.013038, -0.014695, -0.013247, 0.000052, 0.001616, 0.009045, 0.007343, 0.013167, 0.022363, 0.021833, 0.032635, 0.035289, 0.024072, 0.014875, 0.012948, 0.014428, 0.013441, 0.008645, 0.010931, 0.022867, 0.034702
#*# 	-0.374049, 0.005292, 0.010434, -0.002757, 0.001627, -0.005317, -0.001032, 0.011904, 0.004284, 0.007722, 0.016262, 0.016077, 0.022379, 0.023139, 0.028552, 0.037947, 0.021083, 0.010929, 0.010773, 0.019316, 0.016491, 0.007466, 0.009045, 0.018177, 0.025943
#*# 	-0.347198, 0.018448, 0.021440, 0.013259, 0.010448, 0.007503, 0.013495, 0.016584, 0.015218, 0.013067, 0.020102, 0.021141, 0.019935, 0.022600, 0.032405, 0.034787, 0.017730, 0.005246, 0.008158, 0.013639, 0.011865, 0.005625, 0.004627, 0.013940, 0.023302
#*# 	-0.328499, 0.033291, 0.030986, 0.027555, 0.019842, 0.024963, 0.024779, 0.021656, 0.030892, 0.026132, 0.021769, 0.028814, 0.030253, 0.020899, 0.036700, 0.034005, 0.013259, 0.006220, 0.004630, 0.004475, 0.005946, -0.000798, 0.000722, 0.007333, 0.013315
#*# 	-0.302317, 0.039535, 0.040804, 0.028523, 0.024055, 0.023919, 0.024888, 0.033522, 0.037240, 0.029496, 0.024964, 0.027934, 0.021375, 0.021041, 0.024334, 0.019474, 0.005313, -0.001006, -0.008992, -0.013865, -0.014125, -0.013002, -0.013050, -0.002271, 0.005931
#*# 	-0.294078, 0.035861, 0.035336, 0.016177, 0.017751, 0.014465, 0.018261, 0.025153, 0.034408, 0.025037, 0.020638, 0.017550, 0.020114, 0.007517, 0.005234, -0.003721, -0.007263, -0.016176, -0.028157, -0.033062, -0.036167, -0.032961, -0.027674, -0.019089, -0.013543
#*# 	-0.296749, 0.030334, 0.025011, 0.019277, 0.006544, 0.001523, 0.005356, 0.013834, 0.012700, 0.009803, 0.011148, 0.003318, 0.003171, 0.006341, -0.006051, -0.025207, -0.026347, -0.037807, -0.046021, -0.051333, -0.051634, -0.052142, -0.049448, -0.036622, -0.029662
#*# 	-0.270276, 0.036499, 0.018551, 0.007199, 0.011092, -0.000016, -0.008601, 0.007536, 0.007879, -0.004300, 0.005365, 0.004056, -0.010134, -0.010424, -0.017781, -0.041153, -0.046017, -0.043471, -0.056313, -0.061405, -0.063911, -0.066234, -0.058414, -0.049513, -0.040554
#*# 	-0.256001, 0.037878, 0.027558, 0.016736, 0.013475, -0.003075, -0.002603, 0.001792, -0.001384, -0.004864, -0.002402, -0.005008, -0.013106, -0.016071, -0.025207, -0.036850, -0.047162, -0.058812, -0.061389, -0.068098, -0.071073, -0.070770, -0.069638, -0.062248, -0.054202
#*# 	-0.246464, 0.033061, 0.033918, 0.022179, -0.004254, -0.005230, -0.004529, -0.016020, -0.013590, -0.010012, -0.010034, -0.010823, -0.016922, -0.024064, -0.039871, -0.042084, -0.056105, -0.067709, -0.075556, -0.080780, -0.085107, -0.084826, -0.084241, -0.078575, -0.075426
#*# 	-0.244968, 0.032180, 0.036516, 0.011257, -0.004330, -0.018941, -0.018272, -0.021230, -0.026268, -0.027696, -0.023422, -0.028574, -0.033266, -0.033720, -0.057640, -0.062754, -0.062824, -0.081821, -0.088196, -0.084454, -0.095725, -0.103212, -0.090333, -0.088536, -0.081639
#*# 	-0.254060, 0.001342, 0.004103, -0.016108, -0.037074, -0.041100, -0.054483, -0.050810, -0.057721, -0.057845, -0.062346, -0.051416, -0.054960, -0.065432, -0.073709, -0.080060, -0.089090, -0.100169, -0.110325, -0.116097, -0.116457, -0.117936, -0.116124, -0.104775, -0.103318
#*# 	-0.269281, -0.005197, -0.012533, -0.044900, -0.042476, -0.047855, -0.067444, -0.064774, -0.061477, -0.080979, -0.070096, -0.075415, -0.078797, -0.079672, -0.093129, -0.095877, -0.107299, -0.116589, -0.120442, -0.134444, -0.116110, -0.129985, -0.134042, -0.114151, -0.130517
#*# x_count = 25
#*# y_count = 25
#*# mesh_x_pps = 3
#*# mesh_y_pps = 3
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 10.0
#*# max_x = 310.0
#*# min_y = 22.0
#*# max_y = 260.0
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 23.063
#*# pid_ki = 3.015
#*# pid_kd = 44.107
#*#
#*# [cartographer model default]
#*# model_coef = 1.4492693087401316,
#*# 	  1.857254475358562,
#*# 	  0.8222290506043937,
#*# 	  0.3467774160908748,
#*# 	  -0.01716755441934501,
#*# 	  0.3277590404412346,
#*# 	  0.4243846134585049,
#*# 	  -0.39524734313868704,
#*# 	  -0.13089697375076337,
#*# 	  0.31571276757859007
#*# model_domain = 3.303886961854781e-07,3.381852617458094e-07
#*# model_range = 0.100000,5.000000
#*# model_temp = 32.449425
#*# model_offset = 0.40000
