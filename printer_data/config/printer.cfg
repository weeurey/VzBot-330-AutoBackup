#[include shell_command.cfg]
[include mainsail.cfg]
[include include/steppers.cfg]
[include include/fans.cfg]
[include include/bed.cfg]
#[include include/sensorless.cfg]f
#[include include/quickdraw.cfg]
[include include/led.cfg]
[include include/macros.cfg]
#[include include/trad_rack_btt_mmb.cfg]
#[include include/trad_rack_optional.cfg]




[safe_z_home]
home_xy_position: 165, 165
z_hop: 10

[z_tilt] 
z_positions: #Nozzle to GE5C
  -80,  -20
  350, -20
points:
  15, 150
  275, 150
speed: 50
horizontal_move_z: 10
retries: 30
retry_tolerance: 0.1

[input_shaper]
shaper_type_x = zv
shaper_freq_x = 120.6
shaper_type_y = zv
shaper_freq_y = 76.6

[cartographer]
serial: /dev/serial/by-id/usb-Cartographer_614e_01002B001043303856303820-if00
is_non_critical: True
reconnect_interval: 9999999
#   Path to the serial port for the Cartographer device. Typically has the form
#   /dev/serial/by-id/usb-cartographer_cartographer_...
#   
#   If you are using the CAN Bus version, replace serial: with canbus_uuid: and add the UUID.
#   Example: canbus_uuid: 1283as878a9sd
#
speed: 40.
#   Z probing dive speed.
lift_speed: 5.
#   Z probing lift speed.
backlash_comp: 0.5
#   Backlash compensation distance for removing Z backlash before measuring
#   the sensor response.
x_offset: 0.
#   X offset of cartographer from the nozzle.
y_offset: 21.1
#   Y offset of cartographer from the nozzle.
trigger_distance: 2.
#   cartographer trigger distance for homing.
trigger_dive_threshold: 1.5
#   Threshold for range vs dive mode probing. Beyond `trigger_distance +
#   trigger_dive_threshold` a dive will be used.
trigger_hysteresis: 0.006
#   Hysteresis on trigger threshold for untriggering, as a percentage of the
#   trigger threshold.
cal_nozzle_z: 0.1
#   Expected nozzle offset after completing manual Z offset calibration.
cal_floor: 0.1
#   Minimum z bound on sensor response measurement.
cal_ceil:5.
#   Maximum z bound on sensor response measurement.
cal_speed: 1.0
#   Speed while measuring response curve.
cal_move_speed: 10.
#   Speed while moving to position for response curve measurement.
default_model_name: default
#   Name of default cartographer model to load.
mesh_main_direction: X
#   Primary travel direction during mesh measurement.
#mesh_overscan: -1
#   Distance to use for direction changes at mesh line ends. Omit this setting
#   and a default will be calculated from line spacing and available travel.
mesh_cluster_size: 1
#   Radius of mesh grid point clusters.
mesh_runs: 2
#   Number of passes to make during mesh scan.

[printer]
kinematics: corexy
max_velocity: 3000
max_accel: 50000
#max_accel_to_decel: 5000
max_z_velocity: 3000
max_z_accel: 10000
square_corner_velocity: 10

[exclude_object]

[gcode_arcs] # OrcaSlicer
resolution: 0.8


[idle_timeout]

timeout: 600000
# only turn off heaters and motors if the printer is not paused
#gcode:
 #   {% if not printer.pause_resume.is_paused %}
   #     TURN_OFF_HEATERS
  #      M84
   # {% endif %}

[pause_resume]
recover_velocity: 350

[save_variables]
filename:vars.cfg

[virtual_sdcard]
path: /home/pi/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

[mcu]
#USB
serial: /dev/serial/by-id/usb-Klipper_stm32h723xx_0F003B001751313338343730-if00
reconnect_interval: 9999




# Driver6
[extruder]
nozzle_diameter: 0.500
pressure_advance: 0.025
pressure_advance_smooth_time: 0.03
max_extrude_only_distance: 101

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	-0.191116, 0.067134, 0.071055, 0.093213, 0.105391, 0.122730, 0.145165, 0.125996, 0.095254, 0.078111, 0.094747, 0.078737, 0.080647, 0.080143, 0.077016, 0.056265, 0.076252, 0.077321, 0.078719, 0.083676, 0.107657, 0.104999, 0.122315, 0.137870, 0.146492
#*# 	-0.232681, 0.049164, 0.060202, 0.078835, 0.121700, 0.164618, 0.171972, 0.140466, 0.097299, 0.072157, 0.069094, 0.072239, 0.077289, 0.074068, 0.072401, 0.070682, 0.070226, 0.070161, 0.074900, 0.077550, 0.086458, 0.109322, 0.132231, 0.142073, 0.151886
#*# 	-0.214261, 0.039642, 0.062734, 0.094055, 0.146788, 0.189457, 0.198628, 0.147517, 0.094642, 0.081152, 0.056378, 0.085122, 0.093328, 0.063828, 0.092457, 0.075521, 0.074912, 0.090874, 0.077265, 0.082829, 0.092316, 0.128158, 0.133079, 0.150883, 0.158518
#*# 	-0.236519, 0.041586, 0.057004, 0.094679, 0.152131, 0.190436, 0.173689, 0.127731, 0.082667, 0.062003, 0.062374, 0.071576, 0.078780, 0.080396, 0.078640, 0.078169, 0.075633, 0.073797, 0.075745, 0.080654, 0.089172, 0.118376, 0.142363, 0.151287, 0.161727
#*# 	-0.217337, 0.032331, 0.053509, 0.089823, 0.130697, 0.164157, 0.124175, 0.085714, 0.074736, 0.042992, 0.058919, 0.083206, 0.069586, 0.094378, 0.095096, 0.062836, 0.095520, 0.078344, 0.060192, 0.098537, 0.073124, 0.105342, 0.146973, 0.119824, 0.132156
#*# 	-0.231586, 0.029563, 0.033700, 0.053527, 0.087237, 0.100832, 0.084108, 0.057077, 0.039775, 0.040010, 0.049515, 0.061134, 0.077108, 0.074625, 0.068952, 0.067906, 0.067586, 0.065403, 0.066730, 0.067265, 0.075466, 0.087409, 0.098932, 0.110351, 0.121022
#*# 	-0.221964, 0.021178, 0.019207, 0.022522, 0.041431, 0.051796, 0.032552, 0.020219, 0.029412, 0.021005, 0.029407, 0.062004, 0.066784, 0.053469, 0.069225, 0.068263, 0.039760, 0.052607, 0.064576, 0.054121, 0.059664, 0.077302, 0.075835, 0.070609, 0.091318
#*# 	-0.250276, 0.017361, 0.013153, 0.012031, 0.018796, 0.020445, 0.017482, 0.012607, 0.015664, 0.022453, 0.032618, 0.047613, 0.061993, 0.060476, 0.050003, 0.049881, 0.047423, 0.044794, 0.045028, 0.045054, 0.048170, 0.056615, 0.062111, 0.073670, 0.090540
#*# 	-0.243505, 0.016073, 0.011939, 0.015472, 0.012119, 0.004968, 0.004970, 0.012174, 0.012863, 0.014164, 0.032837, 0.047716, 0.056645, 0.063368, 0.062575, 0.045398, 0.041649, 0.052459, 0.041446, 0.029396, 0.047136, 0.050225, 0.046546, 0.069509, 0.087446
#*# 	-0.262869, 0.018693, 0.022575, 0.016170, 0.012448, 0.007466, 0.003361, 0.010475, 0.015651, 0.021018, 0.031598, 0.051802, 0.074176, 0.076387, 0.062389, 0.049322, 0.040135, 0.038775, 0.043399, 0.041147, 0.044242, 0.046905, 0.055657, 0.070680, 0.079874
#*# 	-0.259632, 0.020403, 0.021973, 0.019169, 0.007891, 0.002417, 0.002629, 0.005082, 0.012037, 0.018898, 0.024404, 0.050124, 0.081051, 0.075669, 0.058544, 0.054780, 0.044138, 0.022455, 0.030594, 0.040186, 0.022291, 0.025611, 0.058798, 0.058891, 0.070308
#*# 	-0.262756, 0.019786, 0.022401, 0.008645, 0.005103, 0.005264, 0.001026, 0.004321, 0.012583, 0.013555, 0.021969, 0.046745, 0.074329, 0.080100, 0.067323, 0.048492, 0.032650, 0.023007, 0.012176, 0.020412, 0.023319, 0.021855, 0.032137, 0.049237, 0.056711
#*# 	-0.259485, 0.021881, 0.021925, 0.012316, 0.000771, -0.005338, 0.000090, 0.003367, 0.001647, 0.004662, 0.015802, 0.038983, 0.061896, 0.067259, 0.060397, 0.041523, 0.024072, 0.009388, 0.008653, 0.020860, 0.008200, 0.007166, 0.025357, 0.029118, 0.042475
#*# 	-0.255545, 0.027962, 0.025861, 0.007618, 0.008678, -0.010581, 0.013024, 0.015270, -0.005700, 0.010123, 0.014707, 0.032985, 0.053026, 0.057113, 0.051691, 0.038042, 0.016871, 0.000729, -0.000131, 0.002016, 0.008065, -0.000375, -0.005215, 0.025050, 0.029167
#*# 	-0.237609, 0.034004, 0.032598, 0.019077, 0.007461, 0.004916, 0.008939, 0.005077, 0.001475, 0.002970, 0.011624, 0.028606, 0.039858, 0.042875, 0.046920, 0.031504, 0.008047, -0.007981, -0.009796, 0.012050, 0.002123, -0.005054, 0.006057, 0.005521, 0.023501
#*# 	-0.235432, 0.032873, 0.041631, 0.031263, 0.004945, 0.010359, 0.016861, 0.010064, 0.003972, 0.007277, 0.017223, 0.017159, 0.018513, 0.031323, 0.027105, 0.020685, -0.001536, -0.008761, -0.020435, -0.010237, -0.009615, -0.030303, -0.001458, 0.004610, 0.013409
#*# 	-0.213739, 0.050132, 0.048277, 0.033310, 0.019579, 0.015433, 0.018624, 0.013474, 0.007754, 0.010729, 0.008727, 0.007765, 0.010480, 0.009826, 0.006442, 0.001886, -0.006626, -0.021190, -0.029092, -0.018319, -0.031874, -0.024709, -0.008561, -0.014099, 0.007849
#*# 	-0.226272, 0.021532, 0.034489, 0.037365, -0.006257, -0.002401, 0.015813, -0.016434, -0.016569, 0.012424, -0.020052, -0.023219, 0.005618, -0.026568, -0.033564, -0.015872, -0.041221, -0.048443, -0.038739, -0.060944, -0.058643, -0.039671, -0.038285, -0.023857, -0.001277
#*# 	-0.227910, 0.022832, 0.021535, 0.008006, -0.007327, -0.018477, -0.020765, -0.021608, -0.019619, -0.028368, -0.025580, -0.026633, -0.033831, -0.036935, -0.049207, -0.058526, -0.054895, -0.063941, -0.076391, -0.065840, -0.075318, -0.076934, -0.047880, -0.028269, -0.023514
#*# 	-0.253838, 0.011582, 0.013759, 0.026998, -0.012384, -0.048101, -0.015946, -0.040083, -0.056907, -0.037915, -0.041310, -0.059410, -0.044951, -0.056509, -0.058087, -0.074548, -0.079429, -0.076085, -0.090164, -0.100312, -0.085569, -0.096117, -0.091014, -0.051403, -0.047662
#*# 	-0.244429, 0.018088, 0.025426, 0.033335, 0.013830, -0.027399, -0.031668, -0.036347, -0.058644, -0.039704, -0.039470, -0.065821, -0.066284, -0.055390, -0.091032, -0.092323, -0.083279, -0.098243, -0.109264, -0.092668, -0.097161, -0.109482, -0.095318, -0.064720, -0.067149
#*# 	-0.231336, 0.027797, 0.052404, 0.050091, 0.049802, 0.020763, -0.031760, -0.052621, -0.055183, -0.054192, -0.055988, -0.061320, -0.066619, -0.060392, -0.086711, -0.093902, -0.099926, -0.102485, -0.112877, -0.110558, -0.112768, -0.128129, -0.112637, -0.078097, -0.098730
#*# 	-0.237283, 0.044392, 0.084324, 0.103915, 0.105014, 0.041675, -0.037186, -0.040477, -0.050562, -0.080395, -0.069424, -0.058664, -0.091176, -0.088363, -0.083647, -0.100564, -0.109544, -0.105639, -0.127627, -0.134547, -0.138055, -0.141975, -0.130813, -0.120823, -0.102506
#*# 	-0.192786, 0.059614, 0.111639, 0.180151, 0.131302, 0.057156, -0.010916, -0.039637, -0.064432, -0.076907, -0.082011, -0.080823, -0.082527, -0.114687, -0.107394, -0.112856, -0.135706, -0.131819, -0.125740, -0.155331, -0.142299, -0.137904, -0.163849, -0.132876, -0.108508
#*# 	-0.202157, 0.071161, 0.129112, 0.163521, 0.160797, 0.060200, -0.009503, -0.060486, -0.084665, -0.083525, -0.090774, -0.100888, -0.103806, -0.114157, -0.120662, -0.127259, -0.133340, -0.146173, -0.148823, -0.161371, -0.166896, -0.168808, -0.161735, -0.140373, -0.144719
#*# x_count = 25
#*# y_count = 25
#*# mesh_x_pps = 3
#*# mesh_y_pps = 3
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 10.0
#*# max_x = 310.0
#*# min_y = 22.0
#*# max_y = 260.0
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 28.181
#*# pid_ki = 2.646
#*# pid_kd = 75.031
#*#
#*# [cartographer model default]
#*# model_coef = 1.485983932152011,
#*# 	1.9169917534196323,
#*# 	0.6954894433316958,
#*# 	0.18175518565452972,
#*# 	0.5130839595900691,
#*# 	0.8116848234626105,
#*# 	-0.47789949197227455,
#*# 	-0.8936660897436712,
#*# 	0.3334742468328593,
#*# 	0.4355574773481315
#*# model_domain = 3.3331432766325267e-07,3.386710721271874e-07
#*# model_range = 0.100000,5.000000
#*# model_temp = 38.136077
#*# model_offset = 0.00000
