#[include shell_command.cfg]
[include mainsail.cfg]
[include include/steppers.cfg]
[include include/fans.cfg]
[include include/bed.cfg]
#[include include/sensorless.cfg]f
#[include include/quickdraw.cfg]
[include include/led.cfg]
[include include/macros.cfg]
#[include include/trad_rack_btt_mmb.cfg]
#[include include/trad_rack_optional.cfg]




[safe_z_home]
home_xy_position: 165, 165
z_hop: 10

[z_tilt] 
z_positions: #Nozzle to GE5C
  -80,  -20
  350, -20
points:
  15, 150
  275, 150
speed: 50
horizontal_move_z: 10
retries: 30
retry_tolerance: 0.1

[input_shaper]
shaper_type_x = zv
shaper_freq_x = 120.6
shaper_type_y = zv
shaper_freq_y = 76.6

[cartographer]
serial: /dev/serial/by-id/usb-Cartographer_614e_01002B001043303856303820-if00
is_non_critical: True
reconnect_interval: 9999999
#   Path to the serial port for the Cartographer device. Typically has the form
#   /dev/serial/by-id/usb-cartographer_cartographer_...
#   
#   If you are using the CAN Bus version, replace serial: with canbus_uuid: and add the UUID.
#   Example: canbus_uuid: 1283as878a9sd
#
speed: 40.
#   Z probing dive speed.
lift_speed: 5.
#   Z probing lift speed.
backlash_comp: 0.5
#   Backlash compensation distance for removing Z backlash before measuring
#   the sensor response.
x_offset: 0.
#   X offset of cartographer from the nozzle.
y_offset: 21.1
#   Y offset of cartographer from the nozzle.
trigger_distance: 2.
#   cartographer trigger distance for homing.
trigger_dive_threshold: 1.5
#   Threshold for range vs dive mode probing. Beyond `trigger_distance +
#   trigger_dive_threshold` a dive will be used.
trigger_hysteresis: 0.006
#   Hysteresis on trigger threshold for untriggering, as a percentage of the
#   trigger threshold.
cal_nozzle_z: 0.1
#   Expected nozzle offset after completing manual Z offset calibration.
cal_floor: 0.1
#   Minimum z bound on sensor response measurement.
cal_ceil:5.
#   Maximum z bound on sensor response measurement.
cal_speed: 1.0
#   Speed while measuring response curve.
cal_move_speed: 10.
#   Speed while moving to position for response curve measurement.
default_model_name: default
#   Name of default cartographer model to load.
mesh_main_direction: X
#   Primary travel direction during mesh measurement.
#mesh_overscan: -1
#   Distance to use for direction changes at mesh line ends. Omit this setting
#   and a default will be calculated from line spacing and available travel.
mesh_cluster_size: 1
#   Radius of mesh grid point clusters.
mesh_runs: 2
#   Number of passes to make during mesh scan.

[printer]
kinematics: corexy
max_velocity: 3000
max_accel: 50000
#max_accel_to_decel: 5000
max_z_velocity: 3000
max_z_accel: 10000
square_corner_velocity: 10

[exclude_object]

[gcode_arcs] # OrcaSlicer
resolution: 0.8


[idle_timeout]

timeout: 600000
# only turn off heaters and motors if the printer is not paused
#gcode:
 #   {% if not printer.pause_resume.is_paused %}
   #     TURN_OFF_HEATERS
  #      M84
   # {% endif %}

[pause_resume]
recover_velocity: 350

[save_variables]
filename:vars.cfg

[virtual_sdcard]
path: /home/pi/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

[mcu]
#USB
serial: /dev/serial/by-id/usb-Klipper_stm32h723xx_0F003B001751313338343730-if00
reconnect_interval: 9999




# Driver6
[extruder]
nozzle_diameter: 0.500
pressure_advance: 0.025
pressure_advance_smooth_time: 0.03
max_extrude_only_distance: 101

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.392039, -0.109042, -0.094147, -0.075174, -0.039211, 0.010156, 0.061722, 0.021707, -0.009977, -0.000991, -0.029120, -0.054246, -0.001779, -0.030069, -0.055926, -0.005535, -0.033030, -0.032197, -0.032075, -0.005326, -0.044378, -0.015083, 0.012877, 0.001307, 0.022293
#*# 	  -0.424426, -0.122091, -0.107690, -0.077421, -0.042409, 0.014098, 0.051057, 0.025946, -0.016231, -0.031835, -0.039348, -0.034358, -0.030799, -0.032315, -0.035529, -0.040664, -0.039631, -0.036706, -0.041012, -0.026061, -0.020826, -0.027775, -0.002850, 0.020889, 0.004881
#*# 	  -0.434930, -0.118375, -0.105961, -0.082410, -0.037205, -0.003641, 0.021246, 0.023542, -0.035582, -0.055813, -0.026517, -0.032769, -0.044597, -0.007069, -0.029127, -0.031044, -0.032293, -0.031894, -0.031266, -0.029098, -0.026307, -0.001546, -0.001456, 0.011375, 0.029973
#*# 	  -0.424897, -0.118594, -0.100828, -0.084060, -0.057418, -0.022073, -0.004012, -0.015863, -0.034057, -0.042417, -0.040833, -0.031672, -0.022575, -0.021216, -0.023006, -0.025585, -0.024811, -0.026703, -0.027073, -0.027188, -0.026771, -0.011946, 0.001293, 0.004155, 0.030380
#*# 	  -0.412428, -0.117354, -0.109911, -0.091879, -0.068296, -0.067574, -0.045270, -0.033347, -0.059618, -0.048706, -0.026085, -0.027422, -0.016419, 0.002143, -0.016145, -0.040835, -0.005123, -0.024777, -0.045166, -0.005357, -0.021595, -0.034448, -0.005274, 0.019267, -0.002521
#*# 	  -0.423144, -0.118139, -0.107177, -0.102741, -0.095789, -0.085433, -0.074653, -0.068005, -0.060588, -0.051629, -0.038983, -0.024761, -0.012467, -0.013525, -0.017977, -0.023103, -0.027948, -0.030004, -0.034359, -0.031498, -0.029793, -0.029138, -0.021674, -0.003200, -0.006238
#*# 	  -0.418809, -0.126701, -0.109284, -0.107072, -0.114058, -0.096802, -0.088931, -0.070014, -0.068911, -0.056242, -0.028928, -0.034443, -0.023031, 0.008939, -0.037492, -0.028876, -0.012283, -0.036725, -0.040074, -0.039351, -0.018710, -0.033786, -0.045248, -0.008088, -0.023087
#*# 	  -0.389694, -0.105245, -0.099694, -0.100064, -0.100130, -0.090638, -0.082831, -0.078680, -0.064871, -0.047852, -0.037182, -0.013422, 0.006406, 0.001445, -0.015405, -0.026316, -0.032824, -0.037265, -0.039300, -0.039440, -0.041039, -0.040800, -0.026101, -0.024098, -0.019805
#*# 	  -0.390917, -0.087375, -0.095033, -0.094668, -0.075185, -0.072102, -0.084538, -0.055891, -0.046167, -0.058119, -0.040709, 0.012630, 0.004851, 0.001410, 0.013978, -0.001675, -0.048153, -0.032333, -0.014678, -0.056002, -0.056828, -0.015983, -0.030582, -0.037492, 0.001496
#*# 	  -0.355303, -0.079359, -0.069389, -0.071303, -0.072066, -0.073013, -0.070875, -0.061632, -0.051982, -0.045882, -0.024562, 0.005772, 0.033704, 0.034356, 0.012720, -0.012920, -0.029205, -0.033815, -0.033478, -0.033337, -0.035306, -0.033350, -0.028589, -0.023036, -0.007792
#*# 	  -0.348545, -0.072971, -0.051286, -0.051395, -0.075495, -0.066693, -0.064057, -0.069450, -0.051542, -0.044358, -0.016270, 0.007193, 0.036455, 0.053971, 0.016381, -0.026570, -0.011860, -0.054976, -0.056496, -0.022471, -0.043288, -0.040507, -0.018774, -0.027074, -0.018180
#*# 	  -0.330505, -0.060973, -0.052999, -0.053353, -0.061648, -0.069178, -0.063957, -0.057594, -0.055775, -0.047916, -0.026253, 0.000916, 0.031503, 0.034878, 0.013317, -0.012332, -0.033781, -0.043494, -0.047635, -0.048758, -0.051451, -0.053629, -0.047420, -0.038547, -0.035404
#*# 	  -0.330634, -0.051983, -0.045677, -0.049478, -0.055698, -0.063615, -0.059165, -0.052879, -0.053169, -0.047642, -0.029942, 0.005169, 0.024448, 0.024011, 0.019218, -0.017498, -0.037856, -0.034815, -0.051631, -0.065932, -0.037169, -0.060038, -0.070830, -0.036636, -0.041850
#*# 	  -0.304933, -0.043451, -0.038402, -0.045547, -0.051744, -0.054936, -0.049980, -0.046203, -0.050075, -0.047376, -0.032210, -0.007583, 0.011421, 0.010746, -0.002216, -0.021339, -0.043963, -0.054241, -0.054878, -0.051541, -0.054997, -0.064941, -0.065616, -0.056711, -0.051696
#*# 	  -0.292878, -0.027051, -0.026020, -0.033346, -0.041208, -0.048248, -0.033370, -0.038961, -0.050307, -0.033590, -0.030751, -0.022930, 0.005942, -0.003476, -0.009920, -0.038837, -0.045744, -0.056168, -0.072870, -0.036211, -0.039924, -0.078378, -0.051254, -0.058662, -0.048182
#*# 	  -0.256186, -0.012409, -0.010986, -0.023883, -0.030706, -0.031465, -0.028271, -0.029563, -0.033667, -0.033613, -0.028407, -0.022656, -0.015901, -0.019542, -0.021032, -0.033566, -0.046756, -0.057740, -0.064180, -0.061575, -0.060642, -0.067646, -0.071040, -0.060207, -0.057588
#*# 	  -0.250928, -0.001654, -0.008964, -0.016367, -0.015711, -0.035656, -0.026089, -0.015704, -0.026996, -0.028609, -0.019428, -0.030106, -0.040613, -0.033860, -0.040144, -0.058787, -0.058456, -0.049376, -0.074837, -0.077553, -0.076627, -0.080192, -0.091194, -0.069129, -0.047413
#*# 	  -0.246651, -0.004714, -0.007169, -0.013983, -0.032668, -0.044334, -0.038451, -0.036479, -0.040875, -0.037096, -0.033073, -0.040668, -0.042428, -0.045883, -0.058340, -0.074807, -0.077843, -0.082892, -0.100309, -0.100121, -0.090640, -0.098503, -0.095566, -0.080222, -0.085154
#*# 	  -0.246146, -0.008818, -0.001653, -0.041045, -0.036397, -0.029812, -0.052105, -0.069764, -0.033229, -0.051483, -0.070507, -0.039874, -0.058958, -0.069157, -0.081857, -0.091973, -0.098781, -0.127529, -0.094194, -0.119931, -0.139654, -0.098401, -0.144297, -0.149877, -0.079835
#*# 	  -0.231518, -0.019489, 0.013753, -0.010505, -0.024509, -0.025525, -0.051994, -0.057682, -0.058107, -0.059357, -0.060255, -0.080177, -0.067779, -0.065080, -0.105866, -0.102675, -0.097953, -0.134882, -0.125489, -0.113073, -0.146981, -0.133996, -0.133137, -0.127278, -0.129561
#*# 	  -0.239326, -0.023649, 0.033688, 0.011614, -0.032061, -0.007453, -0.058989, -0.104513, -0.040554, -0.076198, -0.110342, -0.051306, -0.092422, -0.102104, -0.114901, -0.125065, -0.172710, -0.142774, -0.150055, -0.191209, -0.156077, -0.160723, -0.242369, -0.179744, -0.177923
#*# 	  -0.205964, 0.019150, 0.045847, 0.025978, 0.044684, 0.033011, -0.057049, -0.076890, -0.042943, -0.089113, -0.091373, -0.054983, -0.107578, -0.116375, -0.086421, -0.138752, -0.153858, -0.161326, -0.172071, -0.177281, -0.178013, -0.190707, -0.208705, -0.198007, -0.209979
#*# 	  -0.198055, 0.012414, 0.113520, 0.147373, 0.058526, 0.059102, -0.001288, -0.131373, -0.094301, -0.053768, -0.150985, -0.109943, -0.117130, -0.128995, -0.139383, -0.149885, -0.162492, -0.175573, -0.185934, -0.138398, -0.197127, -0.256800, -0.156056, -0.267967, -0.258354
#*# 	  -0.195016, 0.080235, 0.105186, 0.141474, 0.162323, 0.037339, -0.102423, -0.101803, -0.124152, -0.134020, -0.137955, -0.076559, -0.151635, -0.233499, -0.178814, -0.190781, -0.279702, -0.218145, -0.233233, -0.246713, -0.255501, -0.179829, -0.267248, -0.261711, -0.271902
#*# 	  -0.177773, 0.080210, 0.123134, 0.172279, 0.174050, 0.070148, -0.034970, -0.072309, -0.099389, -0.134908, -0.116405, -0.098166, -0.128863, -0.141433, -0.124008, -0.162941, -0.202986, -0.187507, -0.200715, -0.234476, -0.225428, -0.229349, -0.233789, -0.227505, -0.221820
#*# x_count = 25
#*# y_count = 25
#*# mesh_x_pps = 3
#*# mesh_y_pps = 3
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 10.0
#*# max_x = 310.0
#*# min_y = 22.0
#*# max_y = 260.0
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 23.839
#*# pid_ki = 2.012
#*# pid_kd = 70.622
#*#
#*# [cartographer model default]
#*# model_coef = 1.4492693087401316,
#*# 	1.857254475358562,
#*# 	0.8222290506043937,
#*# 	0.3467774160908748,
#*# 	-0.01716755441934501,
#*# 	0.3277590404412346,
#*# 	0.4243846134585049,
#*# 	-0.39524734313868704,
#*# 	-0.13089697375076337,
#*# 	0.31571276757859007
#*# model_domain = 3.303886961854781e-07,3.381852617458094e-07
#*# model_range = 0.100000,5.000000
#*# model_temp = 32.449425
#*# model_offset = 0.42500
