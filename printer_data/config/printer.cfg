#[include shell_command.cfg]
[include mainsail.cfg]
[include include/steppers.cfg]
[include include/fans.cfg]
[include include/bed.cfg]
#[include include/sensorless.cfg]f
#[include include/quickdraw.cfg]
[include include/led.cfg]
[include include/macros.cfg]
#[include include/trad_rack_btt_mmb.cfg]
#[include include/trad_rack_optional.cfg]




[safe_z_home]
home_xy_position: 165, 165
z_hop: 10

[z_tilt] 
z_positions: #Nozzle to GE5C
  -80,  -20
  350, -20
points:
  15, 150
  275, 150
speed: 50
horizontal_move_z: 10
retries: 30
retry_tolerance: 0.1

[input_shaper]
shaper_type_x = zv
shaper_freq_x = 120.6
shaper_type_y = zv
shaper_freq_y = 76.6

[cartographer]
serial: /dev/serial/by-id/usb-Cartographer_614e_01002B001043303856303820-if00
is_non_critical: True
reconnect_interval: 9999999
#   Path to the serial port for the Cartographer device. Typically has the form
#   /dev/serial/by-id/usb-cartographer_cartographer_...
#   
#   If you are using the CAN Bus version, replace serial: with canbus_uuid: and add the UUID.
#   Example: canbus_uuid: 1283as878a9sd
#
speed: 40.
#   Z probing dive speed.
lift_speed: 5.
#   Z probing lift speed.
backlash_comp: 0.5
#   Backlash compensation distance for removing Z backlash before measuring
#   the sensor response.
x_offset: 0.
#   X offset of cartographer from the nozzle.
y_offset: 21.1
#   Y offset of cartographer from the nozzle.
trigger_distance: 2.
#   cartographer trigger distance for homing.
trigger_dive_threshold: 1.5
#   Threshold for range vs dive mode probing. Beyond `trigger_distance +
#   trigger_dive_threshold` a dive will be used.
trigger_hysteresis: 0.006
#   Hysteresis on trigger threshold for untriggering, as a percentage of the
#   trigger threshold.
cal_nozzle_z: 0.1
#   Expected nozzle offset after completing manual Z offset calibration.
cal_floor: 0.1
#   Minimum z bound on sensor response measurement.
cal_ceil:5.
#   Maximum z bound on sensor response measurement.
cal_speed: 1.0
#   Speed while measuring response curve.
cal_move_speed: 10.
#   Speed while moving to position for response curve measurement.
default_model_name: default
#   Name of default cartographer model to load.
mesh_main_direction: X
#   Primary travel direction during mesh measurement.
#mesh_overscan: -1
#   Distance to use for direction changes at mesh line ends. Omit this setting
#   and a default will be calculated from line spacing and available travel.
mesh_cluster_size: 1
#   Radius of mesh grid point clusters.
mesh_runs: 2
#   Number of passes to make during mesh scan.

[printer]
kinematics: corexy
max_velocity: 3000
max_accel: 50000
#max_accel_to_decel: 5000
max_z_velocity: 3000
max_z_accel: 10000
square_corner_velocity: 10

[exclude_object]

[gcode_arcs] # OrcaSlicer
resolution: 0.8


[idle_timeout]

timeout: 600000
# only turn off heaters and motors if the printer is not paused
#gcode:
 #   {% if not printer.pause_resume.is_paused %}
   #     TURN_OFF_HEATERS
  #      M84
   # {% endif %}

[pause_resume]
recover_velocity: 350

[save_variables]
filename:vars.cfg

[virtual_sdcard]
path: /home/pi/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

[mcu]
#USB
serial: /dev/serial/by-id/usb-Klipper_stm32h723xx_0F003B001751313338343730-if00
reconnect_interval: 9999




# Driver6
[extruder]
nozzle_diameter: 0.500
pressure_advance: 0.025
pressure_advance_smooth_time: 0.03
max_extrude_only_distance: 101

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	-0.140592, 0.049246, 0.019677, 0.077270, 0.058223, 0.109423, 0.117522, 0.103995, 0.059986, 0.075934, 0.101821, 0.046796, 0.095446, 0.067551, 0.064339, 0.060982, 0.082187, 0.032175, 0.074578, 0.053369, 0.058840, 0.065268, 0.095077, 0.064342, 0.109136
#*# 	-0.199236, 0.017925, 0.019954, 0.044205, 0.096390, 0.124006, 0.141673, 0.113460, 0.089693, 0.063341, 0.077569, 0.070601, 0.069486, 0.065890, 0.065414, 0.048112, 0.059232, 0.046743, 0.045885, 0.036600, 0.065588, 0.051591, 0.080875, 0.083952, 0.082774
#*# 	-0.205035, -0.010102, 0.026176, 0.066068, 0.118497, 0.149648, 0.175042, 0.121411, 0.081936, 0.063697, 0.080448, 0.048686, 0.090758, 0.065733, 0.060517, 0.032103, 0.073108, 0.025603, 0.045413, 0.045443, 0.071015, 0.050159, 0.107106, 0.090034, 0.067391
#*# 	-0.222509, -0.001345, 0.025366, 0.071310, 0.123974, 0.174013, 0.152534, 0.108769, 0.073414, 0.061645, 0.052647, 0.069884, 0.071591, 0.067410, 0.060391, 0.059386, 0.055075, 0.050070, 0.048285, 0.053492, 0.048790, 0.084703, 0.094251, 0.089793, 0.076053
#*# 	-0.226511, -0.011309, 0.015184, 0.049848, 0.113715, 0.147229, 0.116340, 0.065294, 0.069692, 0.047152, 0.032211, 0.060565, 0.086006, 0.046386, 0.059993, 0.077617, 0.052641, 0.026019, 0.065437, 0.065366, 0.027957, 0.059608, 0.095903, 0.059095, 0.035022
#*# 	-0.255635, -0.017816, 0.003577, 0.026450, 0.074087, 0.089981, 0.066876, 0.047710, 0.036353, 0.030409, 0.039667, 0.053287, 0.063306, 0.059564, 0.052378, 0.045779, 0.042515, 0.036413, 0.031710, 0.030432, 0.028084, 0.045308, 0.053878, 0.042015, 0.032121
#*# 	-0.251371, -0.044548, -0.031435, 0.015746, 0.022998, 0.018506, 0.040954, 0.029430, -0.001495, 0.002745, 0.045504, 0.044669, 0.035809, 0.067405, 0.058482, 0.011422, 0.030477, 0.045083, -0.005658, -0.006467, 0.037548, 0.037283, 0.002500, 0.040577, 0.037748
#*# 	-0.275134, -0.035227, -0.029034, -0.016519, -0.003489, 0.002310, 0.001793, 0.000038, 0.004668, 0.011875, 0.024331, 0.040537, 0.052268, 0.040652, 0.037070, 0.033249, 0.015237, 0.007163, 0.013089, 0.004800, -0.000956, 0.004040, 0.006669, 0.010766, 0.015668
#*# 	-0.267832, -0.034225, -0.020424, -0.027217, -0.022705, -0.004019, -0.008046, -0.011985, 0.016057, 0.020410, 0.015369, 0.032155, 0.067217, 0.038437, 0.023623, 0.043425, 0.034670, -0.003630, 0.008837, 0.022768, -0.011177, 0.004993, 0.016256, 0.007239, -0.011044
#*# 	-0.280149, -0.022988, -0.011836, -0.008852, -0.006646, -0.005596, -0.003607, 0.003136, 0.011028, 0.020767, 0.032758, 0.052347, 0.069817, 0.077262, 0.052698, 0.025482, 0.020227, 0.024320, -0.001368, 0.006063, 0.011192, 0.001854, 0.004862, 0.006515, 0.007600
#*# 	-0.264291, -0.019993, -0.006436, -0.003218, -0.004837, -0.008552, -0.009758, 0.004148, 0.012687, 0.025836, 0.021852, 0.056870, 0.083722, 0.065571, 0.071197, 0.036432, 0.019398, -0.003970, 0.019752, -0.013964, -0.003178, -0.004774, -0.001114, -0.006170, 0.007347
#*# 	-0.291754, -0.018962, -0.002016, -0.003585, -0.007255, -0.011120, -0.000498, 0.002387, 0.013586, 0.014223, 0.024068, 0.042812, 0.073973, 0.072968, 0.059173, 0.036150, 0.014479, -0.006021, -0.000679, -0.012387, -0.016996, -0.021353, -0.019121, -0.009505, -0.017205
#*# 	-0.274780, -0.019653, -0.003828, -0.000510, -0.007771, -0.018722, 0.007556, -0.005569, 0.003719, 0.010620, 0.020606, 0.033780, 0.074449, 0.057125, 0.052237, 0.032551, 0.009885, -0.027207, -0.000589, -0.036781, -0.026888, -0.033715, -0.028850, -0.026119, -0.021046
#*# 	-0.283275, -0.013250, 0.001914, -0.005022, -0.005050, -0.005226, 0.004465, 0.006881, 0.005363, 0.002431, 0.018772, 0.032146, 0.053017, 0.055588, 0.046693, 0.018686, 0.007253, -0.023631, -0.027174, -0.026306, -0.034959, -0.053199, -0.042932, -0.038560, -0.048224
#*# 	-0.270742, -0.003724, 0.004689, 0.011304, -0.007145, 0.005352, 0.015525, 0.014159, 0.006167, 0.017025, 0.004927, 0.038201, 0.031036, 0.043601, 0.035643, 0.023014, -0.004738, -0.012242, -0.048192, -0.008788, -0.053592, -0.047344, -0.050253, -0.049134, -0.056462
#*# 	-0.276504, 0.003561, 0.020301, 0.002059, 0.009209, 0.011738, 0.021063, 0.015307, 0.007340, 0.008067, 0.020919, 0.014804, 0.036558, 0.023297, 0.030774, 0.015158, -0.010804, -0.031015, -0.039312, -0.036894, -0.030876, -0.062616, -0.049847, -0.051433, -0.060662
#*# 	-0.275506, -0.012000, 0.028251, -0.010093, 0.016956, 0.000924, 0.013562, 0.008495, 0.001267, 0.019736, 0.002627, 0.002200, 0.005177, 0.003615, -0.004006, -0.010882, -0.026255, -0.018457, -0.080799, -0.032513, -0.092228, -0.046085, -0.094333, -0.070476, -0.074340
#*# 	-0.310952, -0.049218, -0.011823, -0.018893, -0.027266, -0.063079, 0.019754, -0.017081, -0.023630, -0.057577, 0.013530, -0.060353, 0.009306, -0.066047, -0.008925, -0.083110, -0.024053, -0.105150, -0.088087, -0.060304, -0.125083, -0.069638, -0.133758, -0.068558, -0.135023
#*# 	-0.324660, -0.032536, -0.066756, -0.000521, -0.044829, -0.084637, -0.004486, -0.042646, -0.044972, -0.085097, 0.001089, -0.087839, -0.043629, -0.055129, -0.030767, -0.123340, -0.042917, -0.051668, -0.154529, -0.117110, -0.123980, -0.122926, -0.165172, -0.074147, -0.080824
#*# 	-0.325876, -0.001435, 0.009091, -0.079197, -0.049722, -0.056293, -0.056563, -0.101777, -0.056692, -0.005544, -0.100462, -0.007598, -0.055502, -0.114452, -0.089795, -0.091786, -0.102437, -0.158497, -0.076401, -0.085799, -0.181315, -0.141248, -0.140627, -0.134654, -0.188252
#*# 	-0.340614, -0.033772, 0.028217, -0.067546, -0.028116, -0.003454, -0.110419, -0.008871, -0.065822, -0.115183, -0.062061, -0.068301, -0.012821, -0.136287, -0.098289, -0.049787, -0.170704, -0.071640, -0.082394, -0.197413, -0.151775, -0.154742, -0.157753, -0.163785, -0.166615
#*# 	-0.329812, -0.027327, 0.000463, 0.018704, -0.000094, -0.033915, -0.111778, -0.069134, -0.013784, -0.128115, -0.010700, -0.015968, -0.140688, -0.090884, -0.107078, -0.172989, -0.128924, -0.136855, -0.087452, -0.156300, -0.159067, -0.117914, -0.241503, -0.232748, -0.134972
#*# 	-0.310255, -0.027719, 0.096853, 0.125742, 0.021744, 0.057471, 0.020572, -0.102758, -0.060168, -0.059403, -0.107023, -0.064372, -0.070179, -0.081555, -0.092140, -0.104763, -0.114727, -0.127345, -0.140442, -0.145382, -0.159221, -0.213374, -0.139938, -0.178837, -0.210517
#*# 	-0.325372, 0.000273, 0.058953, 0.099317, 0.075609, 0.086598, -0.045642, -0.085328, -0.020348, -0.095438, -0.098913, -0.029250, -0.103393, -0.117607, -0.059670, -0.135391, -0.231881, -0.091534, -0.180319, -0.274188, -0.135874, -0.221709, -0.294467, -0.158671, -0.160553
#*# 	-0.293284, 0.048193, 0.107724, 0.145013, 0.078529, 0.053144, -0.012330, -0.059778, -0.078528, -0.080761, -0.082963, -0.086001, -0.087187, -0.099097, -0.112484, -0.067697, -0.135349, -0.150256, -0.117061, -0.181911, -0.194182, -0.204638, -0.207175, -0.255175, -0.202445
#*# x_count = 25
#*# y_count = 25
#*# mesh_x_pps = 3
#*# mesh_y_pps = 3
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 10.0
#*# max_x = 310.0
#*# min_y = 22.0
#*# max_y = 260.0
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 28.181
#*# pid_ki = 2.646
#*# pid_kd = 75.031
#*#
#*# [cartographer model default]
#*# model_coef = 1.485983932152011,
#*# 	  1.9169917534196323,
#*# 	  0.6954894433316958,
#*# 	  0.18175518565452972,
#*# 	  0.5130839595900691,
#*# 	  0.8116848234626105,
#*# 	  -0.47789949197227455,
#*# 	  -0.8936660897436712,
#*# 	  0.3334742468328593,
#*# 	  0.4355574773481315
#*# model_domain = 3.3331432766325267e-07,3.386710721271874e-07
#*# model_range = 0.100000,5.000000
#*# model_temp = 38.136077
#*# model_offset = -0.35000
